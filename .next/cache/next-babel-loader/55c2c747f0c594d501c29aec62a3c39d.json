{"ast":null,"code":"import _toConsumableArray from \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/modules/listing/listingModule.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport styles from './styles.module.scss';\nimport BookComp from '../../components/book';\nimport NoResults from '../../components/noResults';\nimport Cart from '../../components/Cart';\n\nvar ListingModule = /*#__PURE__*/function (_Component) {\n  _inherits(ListingModule, _Component);\n\n  var _super = _createSuper(ListingModule);\n\n  function ListingModule(props) {\n    var _this;\n\n    _classCallCheck(this, ListingModule);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"getBooksList\", function () {\n      var apiUrl = '/api/getBooksList';\n      fetch(apiUrl).then(function (res) {\n        return res.json();\n      }).then(function (response) {\n        _this.setState({\n          bookList: response.data\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addToCart\", function (bookDetails) {\n      var _this$state = _this.state,\n          bookList = _this$state.bookList,\n          cart = _this$state.cart;\n\n      if (cart.length < 2 && bookDetails.availableQty > 0) {\n        if (cart.length === 0 || cart.length > 0 && cart.some(function (bookInCart) {\n          return bookInCart.bookId !== bookDetails.bookId;\n        })) {\n          var updatedBookList = bookList.map(function (book) {\n            if (book.bookId === bookDetails.bookId) {\n              book.isSelected = 1;\n            }\n\n            return book;\n          });\n\n          _this.setState({\n            bookList: updatedBookList,\n            cart: [].concat(_toConsumableArray(cart), [bookDetails])\n          });\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeFromCart\", function (bookDetails) {\n      var _this$state2 = _this.state,\n          bookList = _this$state2.bookList,\n          cart = _this$state2.cart;\n\n      if (cart.length > 0) {\n        var updatedBookList = bookList.map(function (book) {\n          if (book.bookId === bookDetails.bookId) book.isSelected = 0;\n          return book;\n        });\n        var updatedCart = cart.filter(function (item) {\n          return item.bookId !== bookDetails.bookId;\n        });\n\n        _this.setState({\n          bookList: updatedBookList,\n          cart: updatedCart\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"borrowBook\", function () {\n      var cart = _this.state.cart;\n      console.log(cart);\n      var borrowApiUrl = '/api/borrowBooks';\n      var fetchData = {\n        method: 'PUT',\n        body: JSON.stringify(cart),\n        headers: new Headers()\n      };\n      fetch(borrowApiUrl, fetchData).then(function (res) {\n        return res.json();\n      }).then(function (response) {\n        console.log(response.data);\n\n        _this.getBooksList();\n\n        _this.setState({\n          cart: []\n        });\n      });\n    });\n\n    _this.state = {\n      cart: [],\n      bookList: []\n    };\n    return _this;\n  }\n\n  _createClass(ListingModule, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getBooksList();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state3 = this.state,\n          _this$state3$bookList = _this$state3.bookList,\n          bookList = _this$state3$bookList === void 0 ? [] : _this$state3$bookList,\n          _this$state3$cart = _this$state3.cart,\n          cart = _this$state3$cart === void 0 ? [] : _this$state3$cart;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.listing,\n        children: [/*#__PURE__*/_jsxDEV(Cart, {\n          cartItems: cart,\n          removeFromCart: this.removeFromCart,\n          borrowBook: this.borrowBook\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.listing__title,\n          children: \"Listing page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.listing__subTitle,\n          children: \"Hover or Tap to select your desired book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.listing__bookListWrap,\n          children: bookList.length > 0 ? bookList.map(function (book) {\n            if (book.availableQty > 0) {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.listing__bookWrap,\n                children: /*#__PURE__*/_jsxDEV(BookComp, {\n                  bookDetails: book,\n                  addToCart: _this2.addToCart,\n                  removeFromCart: _this2.removeFromCart\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 45\n                }, _this2)\n              }, book.bookId, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 41\n              }, _this2);\n            }\n          }) : /*#__PURE__*/_jsxDEV(NoResults, {\n            textToShow: \"No books found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n\n  return ListingModule;\n}(Component);\n\nexport default ListingModule;","map":{"version":3,"sources":["/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/modules/listing/listingModule.js"],"names":["React","Component","styles","BookComp","NoResults","Cart","ListingModule","props","apiUrl","fetch","then","res","json","response","setState","bookList","data","bookDetails","state","cart","length","availableQty","some","bookInCart","bookId","updatedBookList","map","book","isSelected","updatedCart","filter","item","console","log","borrowApiUrl","fetchData","method","body","JSON","stringify","headers","Headers","getBooksList","listing","removeFromCart","borrowBook","listing__title","listing__subTitle","listing__bookListWrap","listing__bookWrap","addToCart"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styles from './styles.module.scss';\nimport BookComp from '../../components/book'\nimport NoResults from '../../components/noResults';\nimport Cart from '../../components/Cart';\n\nclass ListingModule extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cart: [],\n            bookList: [],\n        }\n    }\n\n    componentDidMount() {\n        this.getBooksList();\n    }\n\n    getBooksList = () => {\n        const apiUrl = '/api/getBooksList';\n        fetch(apiUrl).then(res => res.json())\n          .then(response => {\n            this.setState({\n                bookList: response.data,\n            })\n          })\n    }\n    \n    addToCart = bookDetails => {\n        const { bookList, cart } = this.state;\n        if (cart.length < 2 && bookDetails.availableQty > 0) {\n            if (cart.length === 0 || \n                (cart.length > 0 && \n                    cart.some(bookInCart => bookInCart.bookId !== bookDetails.bookId))) {\n                const updatedBookList = bookList.map(book => {\n                    if (book.bookId === bookDetails.bookId) {\n                        book.isSelected = 1\n                    }\n                    return book\n                })\n                this.setState({\n                    bookList: updatedBookList,\n                    cart: [...cart, bookDetails],\n                })\n            }\n        }\n    };\n\n    removeFromCart = bookDetails => {\n        const { bookList, cart } = this.state;\n        if (cart.length > 0) {\n            const updatedBookList = bookList.map(book => {\n                if (book.bookId === bookDetails.bookId)\n                    book.isSelected = 0\n                return book\n            })\n            const updatedCart = cart.filter(item => item.bookId !== bookDetails.bookId)\n            this.setState({\n                bookList: updatedBookList,\n                cart: updatedCart,\n            })\n        }\n    };\n\n    borrowBook = () => {\n        const { cart } = this.state;\n        console.log(cart);\n        const borrowApiUrl = '/api/borrowBooks';\n        const fetchData = {\n            method: 'PUT',\n            body: JSON.stringify(cart),\n            headers: new Headers()\n          }\n        fetch(borrowApiUrl, fetchData).then(res => res.json())\n          .then(response => {\n            console.log(response.data);\n            this.getBooksList();\n            this.setState({\n                cart: [],\n            })\n          })\n    };\n\n    render() {\n        const { bookList = [], cart = [] } = this.state;\n        return (\n            <div className={styles.listing}>\n                <Cart cartItems={cart} removeFromCart={this.removeFromCart} borrowBook={this.borrowBook} />\n                <div className={styles.listing__title}>\n                    Listing page\n                </div>\n                <div className={styles.listing__subTitle}>\n                    Hover or Tap to select your desired book\n                </div>\n                <div className={styles.listing__bookListWrap}>\n                    {bookList.length > 0 ? \n                        bookList.map(book => \n                            {\n                                if (book.availableQty > 0) {\n                                    return (\n                                        <div className={styles.listing__bookWrap} key={book.bookId}>\n                                            <BookComp bookDetails={book} addToCart={this.addToCart} removeFromCart={this.removeFromCart} />\n                                        </div>\n                                    )\n                                }\n                            }\n                        )\n                    : <NoResults textToShow='No books found' />\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ListingModule;"]},"metadata":{},"sourceType":"module"}