{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/modules/listing/listingModule.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport styles from './styles.module.scss';\nimport BookComp from '../../components/book';\nimport NoResults from '../../components/noResults';\nimport Cart from '../../components/Cart';\n\nclass ListingModule extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"addToCart\", bookDetails => {\n      const {\n        bookList,\n        cart\n      } = this.state;\n\n      if (cart.length < 2 && bookDetails.availableQty > 0) {\n        if (cart.length === 0 || cart.length > 0 && cart.some(bookInCart => bookInCart.bookId !== bookDetails.bookId)) {\n          const updatedBookList = bookList.map(book => {\n            if (book.bookId === bookDetails.bookId) {\n              book.isSelected = true;\n            }\n\n            return book;\n          });\n          this.setState({\n            bookList: updatedBookList,\n            cart: [...cart, bookDetails]\n          });\n        }\n      }\n    });\n\n    _defineProperty(this, \"removeFromCart\", bookDetails => {\n      const {\n        bookList,\n        cart\n      } = this.state;\n\n      if (cart.length > 0) {\n        const updatedBookList = bookList.map(book => {\n          if (book.bookId === bookDetails.bookId) book.isSelected = false;\n          return book;\n        });\n        const updatedCart = cart.filter(item => item.bookId !== bookDetails.bookId);\n        this.setState({\n          bookList: updatedBookList,\n          cart: updatedCart\n        });\n      }\n    });\n\n    _defineProperty(this, \"borrowBook\", () => {\n      const {\n        cart\n      } = this.state;\n      console.log(cart);\n    });\n\n    this.state = {\n      cart: [],\n      bookList: []\n    };\n  }\n\n  componentDidMount() {\n    const apiUrl = '/api/getBooksList';\n    fetch(apiUrl).then(res => res.json()).then(response => {\n      this.setState({\n        bookList: response.data\n      });\n    });\n  } // addToCart = bookDetails => {\n  //     const { bookList, cart } = this.state;\n  //     // case to be handle: already added book should not be added\n  //     if (cart.length < 2 && bookDetails.availableQty > 0) {\n  //         const updatedBookList = bookList.map(book => {\n  //             if (book.bookId === bookDetails.bookId) {\n  //                 book.isSelected = true\n  //                 // book.availableQty =- 1\n  //             }\n  //             return book\n  //         })\n  //         this.setState({\n  //             bookList: updatedBookList,\n  //             cart: [...cart, bookDetails],\n  //         })\n  //     }\n  // };\n\n\n  render() {\n    const {\n      bookList,\n      cart\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.listing,\n      children: [/*#__PURE__*/_jsxDEV(Cart, {\n        cartItems: cart,\n        removeFromCart: this.removeFromCart,\n        borrowBook: this.borrowBook\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.listing__title,\n        children: \"Listing page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.listing__subTitle,\n        children: \"Hover or Tap to select your desired book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.listing__bookListWrap,\n        children: bookList.length > 0 ? bookList.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.listing__bookWrap,\n          children: /*#__PURE__*/_jsxDEV(BookComp, {\n            bookDetails: book,\n            addToCart: this.addToCart,\n            removeFromCart: this.removeFromCart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 33\n          }, this)\n        }, book.bookId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 29\n        }, this)) : /*#__PURE__*/_jsxDEV(NoResults, {\n          textToShow: \"No books found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ListingModule;","map":{"version":3,"sources":["/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/modules/listing/listingModule.js"],"names":["React","Component","styles","BookComp","NoResults","Cart","ListingModule","constructor","props","bookDetails","bookList","cart","state","length","availableQty","some","bookInCart","bookId","updatedBookList","map","book","isSelected","setState","updatedCart","filter","item","console","log","componentDidMount","apiUrl","fetch","then","res","json","response","data","render","listing","removeFromCart","borrowBook","listing__title","listing__subTitle","listing__bookListWrap","listing__bookWrap","addToCart"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styles from './styles.module.scss';\nimport BookComp from '../../components/book'\nimport NoResults from '../../components/noResults';\nimport Cart from '../../components/Cart';\n\nclass ListingModule extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cart: [],\n            bookList: [],\n        }\n    }\n\n    componentDidMount() {\n        const apiUrl = '/api/getBooksList';\n        fetch(apiUrl).then(res => res.json())\n          .then(response => {\n            this.setState({\n                bookList: response.data,\n            })\n          })\n    }\n\n    // addToCart = bookDetails => {\n    //     const { bookList, cart } = this.state;\n    //     // case to be handle: already added book should not be added\n    //     if (cart.length < 2 && bookDetails.availableQty > 0) {\n    //         const updatedBookList = bookList.map(book => {\n    //             if (book.bookId === bookDetails.bookId) {\n    //                 book.isSelected = true\n    //                 // book.availableQty =- 1\n    //             }\n    //             return book\n    //         })\n    //         this.setState({\n    //             bookList: updatedBookList,\n    //             cart: [...cart, bookDetails],\n    //         })\n    //     }\n    // };\n    \n    addToCart = bookDetails => {\n        const { bookList, cart } = this.state;\n        if (cart.length < 2 && bookDetails.availableQty > 0) {\n            if (cart.length === 0 || \n                (cart.length > 0 && \n                    cart.some(bookInCart => bookInCart.bookId !== bookDetails.bookId))) {\n                const updatedBookList = bookList.map(book => {\n                    if (book.bookId === bookDetails.bookId) {\n                        book.isSelected = true\n                    }\n                    return book\n                })\n                this.setState({\n                    bookList: updatedBookList,\n                    cart: [...cart, bookDetails],\n                })\n            }\n        }\n    };\n\n    removeFromCart = bookDetails => {\n        const { bookList, cart } = this.state;\n        if (cart.length > 0) {\n            const updatedBookList = bookList.map(book => {\n                if (book.bookId === bookDetails.bookId)\n                    book.isSelected = false\n                return book\n            })\n            const updatedCart = cart.filter(item => item.bookId !== bookDetails.bookId)\n            this.setState({\n                bookList: updatedBookList,\n                cart: updatedCart,\n            })\n        }\n    };\n\n    borrowBook = () => {\n        const { cart } = this.state;\n        console.log(cart);\n    };\n\n    render() {\n        const { bookList, cart } = this.state;\n        return (\n            <div className={styles.listing}>\n                <Cart cartItems={cart} removeFromCart={this.removeFromCart} borrowBook={this.borrowBook} />\n                <div className={styles.listing__title}>\n                    Listing page\n                </div>\n                <div className={styles.listing__subTitle}>\n                    Hover or Tap to select your desired book\n                </div>\n                <div className={styles.listing__bookListWrap}>\n                    {bookList.length > 0 ? \n                        bookList.map(book => \n                            <div className={styles.listing__bookWrap} key={book.bookId}>\n                                <BookComp bookDetails={book} addToCart={this.addToCart} removeFromCart={this.removeFromCart} />\n                            </div>\n                        )\n                    : <NoResults textToShow='No books found' />\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ListingModule;"]},"metadata":{},"sourceType":"module"}