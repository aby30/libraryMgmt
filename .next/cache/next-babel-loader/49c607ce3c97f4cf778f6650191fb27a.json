{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/modules/listing/listingModule.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport styles from './styles.module.scss';\nimport BookComp from '../../components/book';\nimport NoResults from '../../components/noResults';\nimport Slider from '../../components/Slider';\n\nclass ListingModule extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getBooksList\", () => {\n      const apiUrl = '/api/getBooksList';\n      fetch(apiUrl).then(res => res.json()).then(response => {\n        this.setState({\n          bookList: response.data\n        });\n      });\n    });\n\n    _defineProperty(this, \"addToCart\", bookDetails => {\n      const {\n        bookList,\n        cart\n      } = this.state;\n\n      if (cart.length < 2 && bookDetails.availableQty > 0) {\n        if (cart.length === 0 || cart.length > 0 && cart.some(bookInCart => bookInCart.bookId !== bookDetails.bookId)) {\n          const updatedBookList = bookList.map(book => {\n            if (book.bookId === bookDetails.bookId) {\n              book.isSelected = 1;\n            }\n\n            return book;\n          });\n          this.setState({\n            bookList: updatedBookList,\n            cart: [...cart, bookDetails]\n          });\n        }\n      }\n    });\n\n    _defineProperty(this, \"removeFromCart\", bookDetails => {\n      const {\n        bookList,\n        cart\n      } = this.state;\n\n      if (cart.length > 0) {\n        const updatedBookList = bookList.map(book => {\n          if (book.bookId === bookDetails.bookId) book.isSelected = 0;\n          return book;\n        });\n        const updatedCart = cart.filter(item => item.bookId !== bookDetails.bookId);\n        this.setState({\n          bookList: updatedBookList,\n          cart: updatedCart\n        });\n      }\n    });\n\n    _defineProperty(this, \"borrowBook\", () => {\n      const {\n        cart\n      } = this.state;\n      console.log(cart);\n      const borrowApiUrl = '/api/borrowBooks';\n      const fetchData = {\n        method: 'PUT',\n        body: JSON.stringify(cart),\n        headers: new Headers()\n      };\n      fetch(borrowApiUrl, fetchData).then(res => res.json()).then(response => {\n        console.log(response.data);\n        this.getBooksList();\n        this.setState({\n          cart: []\n        });\n      });\n    });\n\n    _defineProperty(this, \"toggleCart\", () => {\n      const {\n        showCart\n      } = this.state;\n      this.setState({\n        showCart: !showCart\n      });\n    });\n\n    _defineProperty(this, \"toggleReturn\", () => {\n      const {\n        showReturn\n      } = this.state;\n      this.setState({\n        showReturn: !showReturn\n      });\n    });\n\n    this.state = {\n      cart: [],\n      bookList: [],\n      showCart: false,\n      showReturn: false\n    };\n  }\n\n  componentDidMount() {\n    this.getBooksList();\n  }\n\n  render() {\n    const {\n      bookList = [],\n      cart = [],\n      showCart,\n      showReturn\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.listing,\n      children: [showCart && /*#__PURE__*/_jsxDEV(Slider, {\n        sliderItems: cart,\n        removeFromSlider: this.removeFromCart,\n        borrowBook: this.borrowBook,\n        hideSlider: this.toggleCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 30\n      }, this), showReturn && /*#__PURE__*/_jsxDEV(Slider, {\n        sliderTitleText: \"Return\",\n        sliderItems: cart,\n        removeFromSlider: this.removeFromCart,\n        borrowBook: this.borrowBook,\n        hideSlider: this.toggleReturn,\n        hideMainCta: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.listing__title,\n        children: \"Listing page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.listing__cartReturn,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.listing__actionIcon,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://res.cloudinary.com/abyy30/image/upload/v1608744183/bookReturn_rdtuxi.svg\",\n            onClick: () => this.toggleReturn()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.listing__actionIcon,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://res.cloudinary.com/abyy30/image/upload/v1608742866/cartOutline_oewduu.svg\",\n            onClick: () => this.toggleCart()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this), cart.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: cart.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 45\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.listing__subTitle,\n        children: \"Hover or Tap to select your desired book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.listing__bookListWrap,\n        children: bookList.length > 0 ? bookList.map(book => {\n          if (book.availableQty > 0) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.listing__bookWrap,\n              children: /*#__PURE__*/_jsxDEV(BookComp, {\n                bookDetails: book,\n                addToCart: this.addToCart,\n                removeFromCart: this.removeFromCart\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 45\n              }, this)\n            }, book.bookId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 41\n            }, this);\n          }\n        }) : /*#__PURE__*/_jsxDEV(NoResults, {\n          textToShow: \"No books found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ListingModule;","map":{"version":3,"sources":["/Users/Abhipray 1/Desktop/MY home/mYY work/HEXAD_assignment/Hexad_trial_code/hexd/modules/listing/listingModule.js"],"names":["React","Component","styles","BookComp","NoResults","Slider","ListingModule","constructor","props","apiUrl","fetch","then","res","json","response","setState","bookList","data","bookDetails","cart","state","length","availableQty","some","bookInCart","bookId","updatedBookList","map","book","isSelected","updatedCart","filter","item","console","log","borrowApiUrl","fetchData","method","body","JSON","stringify","headers","Headers","getBooksList","showCart","showReturn","componentDidMount","render","listing","removeFromCart","borrowBook","toggleCart","toggleReturn","listing__title","listing__cartReturn","listing__actionIcon","listing__subTitle","listing__bookListWrap","listing__bookWrap","addToCart"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styles from './styles.module.scss';\nimport BookComp from '../../components/book'\nimport NoResults from '../../components/noResults';\nimport Slider from '../../components/Slider';\n\nclass ListingModule extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            cart: [],\n            bookList: [],\n            showCart: false,\n            showReturn: false,\n        }\n    }\n\n    componentDidMount() {\n        this.getBooksList();\n    }\n\n    getBooksList = () => {\n        const apiUrl = '/api/getBooksList';\n        fetch(apiUrl).then(res => res.json())\n          .then(response => {\n            this.setState({\n                bookList: response.data,\n            })\n          })\n    }\n    \n    addToCart = bookDetails => {\n        const { bookList, cart } = this.state;\n        if (cart.length < 2 && bookDetails.availableQty > 0) {\n            if (cart.length === 0 || \n                (cart.length > 0 && \n                    cart.some(bookInCart => bookInCart.bookId !== bookDetails.bookId))) {\n                const updatedBookList = bookList.map(book => {\n                    if (book.bookId === bookDetails.bookId) {\n                        book.isSelected = 1\n                    }\n                    return book\n                })\n                this.setState({\n                    bookList: updatedBookList,\n                    cart: [...cart, bookDetails],\n                })\n            }\n        }\n    };\n\n    removeFromCart = bookDetails => {\n        const { bookList, cart } = this.state;\n        if (cart.length > 0) {\n            const updatedBookList = bookList.map(book => {\n                if (book.bookId === bookDetails.bookId)\n                    book.isSelected = 0\n                return book\n            })\n            const updatedCart = cart.filter(item => item.bookId !== bookDetails.bookId)\n            this.setState({\n                bookList: updatedBookList,\n                cart: updatedCart,\n            })\n        }\n    };\n\n    borrowBook = () => {\n        const { cart } = this.state;\n        console.log(cart);\n        const borrowApiUrl = '/api/borrowBooks';\n        const fetchData = {\n            method: 'PUT',\n            body: JSON.stringify(cart),\n            headers: new Headers()\n          }\n        fetch(borrowApiUrl, fetchData).then(res => res.json())\n          .then(response => {\n            console.log(response.data);\n            this.getBooksList();\n            this.setState({\n                cart: [],\n            })\n          })\n    };\n\n    toggleCart = () => {\n        const { showCart } = this.state;\n        this.setState({\n            showCart: !showCart,\n        })\n    };\n\n    toggleReturn = () => {\n        const { showReturn } = this.state;\n        this.setState({\n            showReturn: !showReturn,\n        })\n    };\n\n    render() {\n        const { bookList = [], cart = [], showCart, showReturn } = this.state;\n        return (\n            <div className={styles.listing}>\n                {showCart && <Slider sliderItems={cart} removeFromSlider={this.removeFromCart} borrowBook={this.borrowBook} hideSlider={this.toggleCart}/>}\n                {showReturn && <Slider sliderTitleText='Return' sliderItems={cart} removeFromSlider={this.removeFromCart} borrowBook={this.borrowBook} hideSlider={this.toggleReturn} hideMainCta/>}\n                <div className={styles.listing__title}>\n                    Listing page\n                </div>\n                <div className={styles.listing__cartReturn}>\n                    <span className={styles.listing__actionIcon}>\n                        <img src=\"https://res.cloudinary.com/abyy30/image/upload/v1608744183/bookReturn_rdtuxi.svg\" onClick={() => this.toggleReturn()} />\n                    </span>\n                    <span className={styles.listing__actionIcon}>\n                        <img src=\"https://res.cloudinary.com/abyy30/image/upload/v1608742866/cartOutline_oewduu.svg\" onClick={() => this.toggleCart()} />\n                        {cart.length > 0 && <div>{cart.length}</div>}\n                    </span>\n                </div>\n                <div className={styles.listing__subTitle}>\n                    Hover or Tap to select your desired book\n                </div>\n                <div className={styles.listing__bookListWrap}>\n                    {bookList.length > 0 ? \n                        bookList.map(book => \n                            {\n                                if (book.availableQty > 0) {\n                                    return (\n                                        <div className={styles.listing__bookWrap} key={book.bookId}>\n                                            <BookComp bookDetails={book} addToCart={this.addToCart} removeFromCart={this.removeFromCart} />\n                                        </div>\n                                    )\n                                }\n                            }\n                        )\n                    : <NoResults textToShow='No books found' />\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ListingModule;"]},"metadata":{},"sourceType":"module"}